<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>口コミレビュー表示</title>
  <style>
    :root {
      --main-color: #333;
      --accent-color: #000;
      --bg-color: #f4f4f4;
      --text-color: #222;
      --light-bg: #ffffff;
      --box-bg: #fafafa;
      --border-color: #ccc;
    }
    body {
      background: var(--bg-color);
      color: var(--text-color);
      font-family: sans-serif;
      margin: 0;
      padding: 2em 1em;
    }
    .box {
      background: var(--light-bg);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 1em;
      max-width: 600px;
      margin: 1.5em auto;
    }
    h2, h3 {
      text-align: center;
      color: var(--main-color);
    }
    .tag {
      display: inline-block;
      background: var(--accent-color);
      color: white;
      border-radius: 8px;
      padding: 0.3em 0.8em;
      margin: 0.2em;
      font-size: 0.9em;
    }
    .auto-text {
      background: #fffbe6;
      border-left: 4px solid var(--accent-color);
      padding: 1em;
      margin-top: 1em;
      font-size: 1.05em;
      line-height: 1.6;
    }
  </style>
</head>
<body>
  <div class="box">
    <h2 id="shopTitle">店舗名がここに</h2>
    <div id="staffDisplay"></div>
    <div id="courseDisplay"></div>
    <div id="commentTags"></div>
    <div>
  <label style="font-weight: bold; display: block; margin-bottom: 0.5em; text-align: center;">文章スタイルを選択：</label>
  <div style="display: flex; justify-content: center; gap: 1em; flex-wrap: wrap; margin-bottom: 1em;">
    <button class="button" onclick="generateReview('敬語')">敬語</button>
    <button class="button" onclick="generateReview('カジュアル')">カジュアル</button>
    <button class="button" onclick="generateReview('フレンドリー')">フレンドリー</button>
  </div>
  <div id="autoGeneratedText" class="auto-text"></div>
</div>
  </div>
  <script>
    const params = new URLSearchParams(window.location.search);
    const dataStr = params.get('data');
    if (dataStr) {
      const data = JSON.parse(decodeURIComponent(atob(dataStr)));
      document.getElementById('shopTitle').textContent = data.shopName || '店舗名未入力';
      document.getElementById('staffDisplay').textContent = data.staffs.length ? `担当スタッフ：${data.staffs.join(', ')}` : '';
      if (data.courses.length) {
        const courseDiv = document.getElementById('courseDisplay');
        data.courses.forEach(c => {
          const span = document.createElement('span');
          span.className = 'tag';
          span.textContent = c;
          courseDiv.appendChild(span);
        });
      }
      if (data.comments.length) {
        const commentDiv = document.getElementById('commentTags');
        data.comments.forEach(c => {
          const span = document.createElement('span');
          span.className = 'tag';
          span.textContent = c;
          commentDiv.appendChild(span);
        });
      }
      if (data.staffs.length || data.courses.length || data.comments.length) {
        const text = `${data.staffs[0] || 'スタッフ'}さんの${data.courses[0] || '施術'}を受けました。${data.comments.join('、')}など、満足のいく時間でした！`;
        document.getElementById('autoGeneratedText').textContent = text;
      }
    }
  function generateReview(tone) {
  const params = new URLSearchParams(window.location.search);
  const dataStr = params.get('data');
  if (!dataStr) return;
  const data = JSON.parse(decodeURIComponent(atob(dataStr)));

  const name = data.staffs[0] || 'スタッフ';
  const course = data.courses[0] || '施術';
  const comments = data.comments.join('、') || 'とても良かったです';

  let text = '';
  if (tone === '敬語') {
    text = `${name}さんの${course}を受けました。${comments}など、丁寧な対応にとても満足しました。`;
  } else if (tone === 'カジュアル') {
    text = `${name}さんの${course}受けてきたよ！${comments}でかなり満足だった〜。`;
  } else if (tone === 'フレンドリー') {
    text = `${name}さんの${course}、めっちゃ良かったよ！${comments}とか最高！また行きたい！`;
  }
  document.getElementById('autoGeneratedText').textContent = text;
}
</script>
</body>
</html>
